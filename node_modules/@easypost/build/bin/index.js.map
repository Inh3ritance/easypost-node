{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./index.js","webpack:///external \"child_process\"","webpack:///external \"path\"","webpack:///external \"yargs\""],"names":["logResult","err","stats","console","error","stack","details","info","toJson","hasErrors","errors","forEach","e","hasWarnings","warnings","warn","log","toString","colors","build","args","pack","spawn","path","join","process","cwd","watch","config","stdio","on","code","exit","serve","audit","auditProcess","level","yargs","usage","command","alias","default","y","demandOption","choices","help","argv"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","import path from 'path';\nimport yargs from 'yargs';\nimport { spawn } from 'child_process';\n\n/* eslint no-console: 0, consistent-return: 0 */\nexport function logResult(err, stats) {\n  if (err) {\n    return console.error(err);\n  }\n\n  if (err) {\n    console.error(err.stack || err);\n    if (err.details) {\n      console.error(err.details);\n    }\n    return;\n  }\n\n  const info = stats.toJson();\n\n  if (stats.hasErrors()) {\n    info.errors.forEach(e => console.error(e));\n  }\n\n  if (stats.hasWarnings()) {\n    info.warnings.forEach(e => console.warn(e));\n  }\n\n  console.log(stats.toString({ colors: true }));\n}\n\nexport const build = args => {\n  const pack = spawn(path.join(process.cwd(), 'node_modules', '.bin', 'webpack'), [\n    ...(args.watch ? ['--watch'] : []),\n    '--config',\n    args.config,\n  ], {\n    cwd: process.cwd(),\n    stdio: 'inherit',\n  });\n\n  pack.on('close', code => process.exit(code));\n};\n\nexport const serve = () => {\n  spawn(path.join(process.cwd(), 'node_modules', '.bin', 'webpack-dev-server'), [], {\n    cwd: process.cwd(),\n    stdio: 'inherit',\n  });\n};\n\nexport const audit = args => {\n  const auditProcess = spawn(path.join(process.cwd(), 'node_modules', '.bin', 'npm-audit-ci'), [\n    `-${args.level}`,\n  ], {\n    cwd: process.cwd(),\n    stdio: 'inherit',\n  });\n\n  auditProcess.on('close', code => process.exit(code));\n};\n\nexport default yargs\n  .usage('ep-node-build <command> [options]')\n  .command(['build', '$0'], 'Builds current project', {\n    watch: {\n      alias: 'w',\n      default: false,\n    },\n    config: {\n      default: path.join(process.cwd(), 'webpack.config.babel.js'),\n    },\n  }, build)\n  .command(\n    'serve',\n    'Runs webpack-dev-server for live reload',\n    y => y,\n    serve,\n  )\n  .command(\n    'audit',\n    'Audits security vulnerabilities; exits with failure if any of [level] are found', {\n      level: {\n        alias: 'l',\n        default: 'c',\n        demandOption: true,\n        choices: ['l', 'm', 'h', 'c'],\n      },\n    },\n    audit,\n  )\n  .alias('h', 'help')\n  .help('h')\n  .argv;\n","module.exports = require(\"child_process\");","module.exports = require(\"path\");","module.exports = require(\"yargs\");"],"sourceRoot":""}